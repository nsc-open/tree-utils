window.treeUtils=function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){i(e,n,t[n])})}return e}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.r(n);var a=function(e,n,t){var i=o({keyPropName:"key",childrenPropName:"children"},t||{}),a=i.childrenPropName,c=i.keyPropName,u={};!function e(n){var t=n.tree,o=n.parent,i=n.level,l=n.path,s=n.callback;t.forEach(function(n){!1!==s({node:n,parent:o,level:i,path:l,context:u})&&n[a]&&e({tree:n[a],parent:n,level:i+1,path:[].concat(r(l),[n[c]]),callback:s})})}({tree:e,parent:null,level:0,path:[],callback:n}),u=null},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=o({keyPropName:"key",parentPropName:"parent",childrenPropName:"children",isRoot:n&&n.isRoot?n.isRoot:function(e,n){return!e[n]}},n||{}),r=t.keyPropName,a=t.parentPropName,c=t.childrenPropName;return e.filter(function(e){return t.isRoot(e,a)}).map(function(n){return Object.assign(Object.create(null),n,i({},c,function n(t){for(var o=[],u=0;u<e.length;u++){var l=e[u];l[a]===t&&o.push(Object.assign(Object.create(null),l,i({},c,n(l[r]))))}return o.length>0?o:null}(n[r])))})};function u(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f={keyPropName:"key",parentPropName:"parent",childrenPropName:"children",cascadeFields:[],cascadeFilter:function(e,n){return!0}},d=function(){function e(n,t){var r=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_key",function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return r._nodeProp.apply(r,[e,r.options.keyPropName].concat(t))}),s(this,"_parentKey",function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return r._nodeProp.apply(r,[e,r.options.parentPropName].concat(t))}),s(this,"_children",function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return r._nodeProp.apply(r,[e,r.options.childrenPropName].concat(t))}),this.options=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){s(e,n,t[n])})}return e}({},f,{},t||{}),this.tree=n,this.nodeMap=this._flatten(n),this._preventSync=!1}return function(e,n,t){n&&l(e.prototype,n),t&&l(e,t)}(e,[{key:"_flatten",value:function(e){var n=this.options,t=this._key,r={};return a(e,function(e){var n=e.node,o=e.parent,i={node:n,level:e.level,path:e.path,parent:null,children:null};if(o){var a=r[t(o)];i.parent=a,a.children=a.children||[],a.children.push(i)}r[t(n)]=i},n),r}},{key:"_nodeProp",value:function(e,n){return arguments.length>2?e[n]=arguments[2]:e[n]}},{key:"sync",value:function(){this._preventSync||(this.nodeMap=this._flatten(this.tree))}},{key:"syncWrapper",value:function(e){this._preventSync=!0,e(),this._preventSync=!1,this.sync()}},{key:"getTree",value:function(){return this.tree}},{key:"getNode",value:function(e){return"function"==typeof e?Object.values(this.nodeMap).find(e):this.nodeMap[e]||null}},{key:"getChildren",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{directChildren:!1};if(e){if(n.directChildren){var t=this.getNode(e);return t?t.children:[]}return Object.values(this.nodeMap).filter(function(n){return n.path.includes(e)})}return Object.values(this.nodeMap)}},{key:"getParent",value:function(e){var n=this.getNode(e);return n&&n.parent||null}},{key:"getParents",value:function(e){var n=this,t=this.getNode(e);return t?t.path.map(function(e){return n.getNode(e)}):[]}},{key:"getSiblings",value:function(e){var n=this,t=this.getLevel(e);return null===t?[]:Object.values(this.nodeMap).filter(function(r){return r.level===t&&n._key(r.node)!==e})}},{key:"getLeaves",value:function(e){}},{key:"getLevel",value:function(e){if(0===arguments.length){var n=Object.values(this.nodeMap).map(function(e){return e.level});return Math.max.apply(Math,u(n))}var t=this.getNode(e);return t?t.level:null}},{key:"isTop",value:function(e){return 0===this.getLevel(e)}},{key:"isChildOf",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{directChild:!1},r=this.getNode(e);return!!r&&(t.directChild?!!r.parent&&this._key(r.parent.node)===n:r.path.includes(n))}},{key:"isParentOf",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{directParent:!1};return this.isChildOf(n,e,{directChild:t.directParent})}},{key:"traverse",value:function(e){Object.values(this.nodeMap).forEach(e)}},{key:"some",value:function(e,n){return this.getChildren(e).some(n)}},{key:"every",value:function(e,n){return this.getChildren(e).every(n)}},{key:"sort",value:function(e){this.tree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{childrenPropName:"children"};return function e(r){return r.map(function(n){var r=n[t.childrenPropName];return r&&r.length>0&&(n[t.childrenPropName]=e(r)),n}).sort(n)}(e)}(this.tree,e);var n=this._preventSync;this._preventSync=!1,this.sync(),this._preventSync=n}},{key:"setFieldValue",value:function(e,n,t){var r=this,o=this.getNode(e);if(o){var i=function(e){return r.options.cascadeFilter(n,e)};if(this.options.cascadeFields.includes(n))o.node[n]={value:t,indeterminate:!1},this.getChildren(e).filter(i).forEach(function(e){e.node[n]={value:t,indeterminate:!1}}),this.getParents(e).filter(i).reverse().forEach(function(e){var r=e.children.every(function(e){var r=e.node[n]||{},o=r.value,i=r.indeterminate;return o===t&&!i});e.node[n]={value:t,indeterminate:!r}});else o.node[n]=t}}},{key:"addNode",value:function(e,n){var t=this._key,r=this._parentKey,o=this._children,i=this.options.keyPropName;if(!t(n))return console.warn("cannot find valid key from node.".concat(i)),!1;var a=this.getNode(e);if(e&&!a)return console.warn("cannot find parent of key: ".concat(e)),!1;if(r(n,e),a){var c=o(a.node);c?c.push(n):o(a.node,[n])}else this.tree.push(n);this.sync()}},{key:"removeNode",value:function(e){var n=this.getNode(e);if(!n)return!1;var t=this._key,r=this._children,o=n.parent;return o?r(o.node,r(o.node).filter(function(n){return t(n)!==e})):this.tree=this.tree.filter(function(n){return t(n)!==e}),this.sync(),n}},{key:"moveNode",value:function(e,n){var t=this;if(this.isChildOf(n,e))return console.warn("cannot move a node into its children node"),!1;var r=!n;if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;var o=r?null:this.getNode(n);if(!r&&!o)return console.warn("parent node ".concat(n," does not exist")),!1;this.syncWrapper(function(){var r=t.removeNode(e);t.addNode(n,r.node)})}},{key:"addChildren",value:function(e,n){var t=this;if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;n=Array.isArray(n)?n:[n],this.syncWrapper(function(){n.forEach(function(n){return t.addNode(e,n)})})}},{key:"removeChildren",value:function(e){var n=this,t=this.getNode(e);if(!t)return console.warn("target node ".concat(e," does not exist")),!1;var r=this._children,o=this._key;r(t.node)&&0!==r(t.node).length&&this.syncWrapper(function(){r(t.node).forEach(function(e){return n.removeNode(o(e))})})}},{key:"setChildren",value:function(e,n){var t=this;if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;n=Array.isArray(n)?n:[n],this.syncWrapper(function(){t.removeChildren(e),t.addChildren(e,n)})}}]),e}();t.d(n,"TreeAgent",function(){return d}),t.d(n,"walk",function(){return a}),t.d(n,"buildTree",function(){return c})}]);