window.treeUtils=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var a=function(e,t,n){var i=o({childrenPropName:"children"},n||{}).childrenPropName,a={};!function e(t){var n=t.tree,o=t.parent,u=t.level,l=t.path,c=t.callback;n.forEach(function(t){!1!==c({node:t,parent:o,level:u,path:l,context:a})&&t[i]&&e({tree:t[i],parent:t,level:u+1,path:[].concat(r(l),[t.key]),callback:c})})}({tree:e,parent:null,level:0,path:[],callback:t}),a=null},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=o({keyPropName:"key",parentPropName:"parent",childrenPropName:"children"},(arguments.length>1?arguments[1]:void 0)||{}),n=t.keyPropName,r=t.parentPropName,a=t.childrenPropName;return e.filter(function(e){return!e[r]}).map(function(t){return Object.assign(Object.create(null),t,i({},a,function t(o){for(var u=[],l=0;l<e.length;l++){var c=e[l];c[r]===o&&u.push(Object.assign(Object.create(null),c,i({},a,t(c[n]))))}return u.length>0?u:null}(t[n])))})};function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keyPropsName:"key",parentKeyPropName:"parent",childrenPropName:"children"};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_key",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n._nodeProp.apply(n,[e,n.options.keyPropsName].concat(r))}),s(this,"_parentKey",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n._nodeProp.apply(n,[e,n.options.parentKeyPropName].concat(r))}),s(this,"_children",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n._nodeProp.apply(n,[e,n.options.childrenPropName].concat(r))}),this.options=r,this.tree=t,this.nodeMap=this._flatten(t),this._preventSync=!1}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:"_flatten",value:function(e){var t=this.options,n=this._key,r={};return a(e,function(e){var t=e.node,o=e.parent,i={node:t,level:e.level,path:e.path,parent:null,children:null};if(o){var a=r[n(o)];i.parent=a,a.children=a.children||[],a.children.push(i)}r[n(t)]=i},t),r}},{key:"_nodeProp",value:function(e,t){return arguments.length>2?e[t]=arguments[2]:e[t]}},{key:"sync",value:function(){this._preventSync||(this.nodeMap=this._flatten(this.tree))}},{key:"getTree",value:function(){return this.tree}},{key:"getNode",value:function(e){return this.nodeMap[e]||null}},{key:"getChildren",value:function(e){return e?Object.values(this.nodeMap).filter(function(t){return t.path.includes(e)}):Object.values(this.nodeMap)}},{key:"getParent",value:function(e){var t=this.getNode(e);return t&&t.parent||null}},{key:"getParents",value:function(e){var t=this,n=this.getNode(e);return n?n.path.map(function(e){return t.getNode(e)}):[]}},{key:"getSiblings",value:function(e){var t=this,n=this.getLevel(e);return null===n?[]:Object.values(this.nodeMap).filter(function(r){return r.level===n&&t._key(r.node)!==e})}},{key:"getLeaves",value:function(e){}},{key:"getLevel",value:function(e){if(0===arguments.length){var t=Object.values(this.nodeMap).map(function(e){return e.level});return Math.max.apply(Math,l(t))}var n=this.getNode(e);return n?n.level:null}},{key:"isTop",value:function(e){return 0===this.getLevel(e)}},{key:"isChildOf",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{directChild:!1},r=this.getNode(e);return!!r&&(n.directChild?!!r.parent&&this._key(r.parent.node)===t:r.path.includes(t))}},{key:"isParentOf",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{directParent:!1};return this.isChildOf(t,e,{directChild:n.directParent})}},{key:"traverse",value:function(e){Object.values(this.nodeMap).forEach(e)}},{key:"some",value:function(e,t){return this.getChildren(e).some(t)}},{key:"every",value:function(e,t){return this.getChildren(e).every(t)}},{key:"addNode",value:function(e,t){var n=this._key,r=this._parentKey,o=this._children,i=this.options.keyPropsName;if(!n(t))return console.warn("cannot find valid key from node.".concat(i)),!1;var a=this.getNode(e);if(e&&!a)return console.warn("cannot find parent of key: ".concat(e)),!1;if(r(t,e),a){var u=o(a.node);u?u.push(t):o(a.node,[t])}else this.tree.push(t);this.sync()}},{key:"removeNode",value:function(e){var t=this.getNode(e);if(!t)return!1;var n=this._key,r=this._children,o=t.parent;return o?r(o.node,r(o.node).filter(function(t){return n(t)!==e})):this.tree=this.tree.filter(function(t){return n(t)!==e}),this.sync(),t}},{key:"moveNode",value:function(e,t){if(this.isChildOf(t,e))return console.warn("cannot move a node into its children node"),!1;var n=!t;if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;var r=n?null:this.getNode(t);if(!n&&!r)return console.warn("parent node ".concat(t," does not exist")),!1;this._preventSync=!0;var o=this.removeNode(e);this.addNode(t,o.node),this._preventSync=!1,this.sync()}},{key:"addChildren",value:function(e,t){var n=this;if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;t=Array.isArray(t)?t:[t],this._preventSync=!0,t.forEach(function(t){return n.addNode(e,t)}),this._preventSync=!1,this.sync()}},{key:"removeChildren",value:function(e){var t=this,n=this.getNode(e);if(!n)return console.warn("target node ".concat(e," does not exist")),!1;var r=this._children,o=this._key;r(n.node)&&0!==r(n.node).length&&(this._preventSync=!0,r(n.node).forEach(function(e){return t.removeNode(o(e))}),this._preventSync=!1,this.sync())}},{key:"setChildren",value:function(e,t){if(!this.getNode(e))return console.warn("target node ".concat(e," does not exist")),!1;t=Array.isArray(t)?t:[t],this._preventSync=!0,this.removeChildren(e),this.addChildren(e,t),this._preventSync=!1,this.sync()}}]),e}();n.d(t,"TreeAgent",function(){return h}),n.d(t,"walk",function(){return a}),n.d(t,"buildTree",function(){return u})}]);